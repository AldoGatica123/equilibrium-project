---
title: "Proyecto ENCOVI"
author: "Aldo Gatica - Alyson Rosales"
date: "2025-10-11"
output: html_document
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(readxl)
```
# Medida de Precio del Frijol.  

- Se hizo una selección de el producto "Frijol" de la base de datos ENCOVI 2023.

```{r}
datos <- read_excel("Frijol_ENCOVI_2023.xlsx")
names(datos)[names(datos) == "P13A07E"] <- "GASTO_TOTAL"
names(datos)[names(datos) == "P13A07A"] <- "CANTIDAD_COMPRADA"
```

- Se reemplazaron los valores 0 por NA y se imputaron los valores medios para las variables GASTO_TOTAL y CANTIDAD_COMPRADA.
- Se creó la variable PRECIO_UNITARIO dividiendo GASTO_TOTAL entre CANTIDAD_COMPRADA.

```{r}
datos$CANTIDAD_COMPRADA[datos$CANTIDAD_COMPRADA == 0] <- NA
datos <- datos[!is.na(datos$CANTIDAD_COMPRADA), ]
```

```{r}
datos$PRECIO_UNITARIO <- datos$GASTO_TOTAL / datos$CANTIDAD_COMPRADA
summary(datos$PRECIO_UNITARIO)
```



```{r}
Q1 <- quantile(datos$PRECIO_UNITARIO, 0.25, na.rm = TRUE)
Q3 <- quantile(datos$PRECIO_UNITARIO, 0.75, na.rm = TRUE)
IQR <- Q3 - Q1

limite_inferior <- Q1 - 1.5 * IQR
limite_superior <- Q3 + 1.5 * IQR

datos$PRECIO_UNITARIO[datos$PRECIO_UNITARIO < limite_inferior] <- limite_inferior
datos$PRECIO_UNITARIO[datos$PRECIO_UNITARIO > limite_superior] <- limite_superior

summary(datos$PRECIO_UNITARIO)

hist(datos$PRECIO_UNITARIO, main = "Histograma de Precio Unitario después del tratamiento de outliers", xlab = "Precio Unitario", col = "lightblue", border = "black")
qqnorm(datos$PRECIO_UNITARIO, main = "QQ-Plot de Precio Unitario después del tratamiento de outliers")
qqline(datos$PRECIO_UNITARIO, col = "red")
```


```{r}
modelo <- lm(datos$CANTIDAD_COMPRADA ~ datos$PRECIO_UNITARIO, weights = datos$FACTOR, datos)
summary(modelo)
```

## Funcion de demanda
**Q = 6.393 - 0.22226 * P**

# Medida de Ingresos

```{r}
datos_ingreso <- read_excel("Personas_ENCOVI_2023.xlsx")
datos_ingreso <- datos_ingreso[!is.na(datos_ingreso$P10C01), ]
summary(datos_ingreso)
head(datos_ingreso)
dim(datos_ingreso)
```

```{r}
# No_HOGAR I want to group by HOGAR and sum all the INGRESO variables without external dependencies
# ingreso_hogar <- aggregate(cbind(P10C01, P10C27, P10C31B, P10C32B, P10C34B, P10C38B) ~ NO_HOGAR, data = datos_ingreso, sum, na.rm = TRUE)
# summary(ingreso_hogar)
# head(ingreso_hogar)
# dim(ingreso_hogar)
```




